{"version":3,"sources":["components/firebase/firebase.js","components/firebase/addMsg.js","components/auth/login.js","App.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","fb","auth","firestore","addMsg","user","content","a","collection","add","timestamp","FieldValue","serverTimestamp","orderBy","get","snapShot","docs","length","doc","id","delete","Login","props","style","textAlign","margin","zIndex","width","position","top","msTransform","transform","className","onClick","signInWithPopup","GoogleAuthProvider","then","res","console","log","onUserLogin","catch","error","message","src","alt","height","fontWeight","fontFamily","App","state","messages","msgToSend","btn","updateChat","snapshot","temp","map","push","data","setState","handleInputChange","e","key","addMsgHandler","target","value","photoURL","this","onSnapshot","userData","displayName","msg","index","class","type","placeholder","onChange","React","Component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a68d1b02.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport \"firebase/firestore\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyDVG0PtInMTclQla1MzeZnHjJceQgtm8m8\",\r\n  authDomain: \"chat-app-34123.firebaseapp.com\",\r\n  databaseURL: \"https://chat-app-34123-default-rtdb.firebaseio.com\",\r\n  projectId: \"chat-app-34123\",\r\n  storageBucket: \"chat-app-34123.appspot.com\",\r\n  messagingSenderId: \"569280308056\",\r\n  appId: \"1:569280308056:web:a17a1ff413aab459157b2d\",\r\n};\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nexport const fb = firebase;\r\nexport const auth = firebase.auth();\r\nexport const firestore = firebase.firestore();\r\n","import { firestore } from \"./firebase\";\r\nimport { fb } from \"./firebase\";\r\n\r\nconst addMsg = async (user, content) => {\r\n  firestore.collection(\"chat\").add({\r\n    user,\r\n    content,\r\n    timestamp: fb.firestore.FieldValue.serverTimestamp(),\r\n  });\r\n  const snapShot = await firestore\r\n    .collection(\"chat\")\r\n    .orderBy(\"timestamp\", \"asc\")\r\n    .get();\r\n  if (snapShot.docs.length >= 10) {\r\n    await firestore.collection(\"chat\").doc(snapShot.docs[0].id).delete();\r\n  }\r\n};\r\n\r\nexport default addMsg;\r\n","import React, { useState } from \"react\";\r\nimport { auth, fb } from \"../firebase/firebase\";\r\n\r\nconst Login = (props) => {\r\n  const signInWithGoogle = () => {\r\n    auth\r\n      .signInWithPopup(new fb.auth.GoogleAuthProvider())\r\n      .then((res) => {\r\n        console.log(res.user);\r\n        props.onUserLogin(res.user);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error.message);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        textAlign: \"center\",\r\n        margin: 0,\r\n        zIndex: \"2\",\r\n        width: \"100%\",\r\n        position: \"absolute\",\r\n        top: \"50%\",\r\n        msTransform: \"translateY(-50%)\",\r\n        transform: \"translateY(-50%)\",\r\n      }}\r\n    >\r\n      <img\r\n        className=\"hoverable\"\r\n        onClick={signInWithGoogle}\r\n        src=\"https://upload.wikimedia.org/wikipedia/commons/c/c3/Font_Awesome_5_brands_google.svg\"\r\n        alt=\"google logo\"\r\n        style={{\r\n          width: \"100px\",\r\n          height: \"100px\",\r\n        }}\r\n      ></img>\r\n      <h1\r\n        className=\"hoverable\"\r\n        style={{ fontWeight: 900, fontFamily: \"revert\" }}\r\n      >\r\n        Log In\r\n      </h1>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React from \"react\";\nimport \"./App.css\";\nimport addMsg from \"./components/firebase/addMsg\";\nimport { firestore } from \"./components/firebase/firebase\";\nimport Login from \"./components/auth/login\";\n\nclass App extends React.Component {\n  state = {\n    messages: [],\n    msgToSend: \"\",\n    btn: true,\n    user: null,\n  };\n\n  componentDidMount() {\n    this.updateChat();\n    firestore.collection(\"chat\").onSnapshot(this.updateChat);\n  }\n\n  updateChat = () => {\n    firestore\n      .collection(\"chat\")\n      .orderBy(\"timestamp\", \"asc\")\n      .get()\n      .then((snapshot) => {\n        let temp = [];\n        snapshot.docs.map((doc) => {\n          temp.push(doc.data());\n          return 0;\n        });\n        this.setState({ messages: temp });\n        this.setState({ btn: true });\n      });\n  };\n\n  handleInputChange = (e) => {\n    if (e.key === \"Enter\") {\n      this.addMsgHandler();\n    } else {\n      this.setState({ msgToSend: e.target.value });\n    }\n  };\n\n  addMsgHandler = async () => {\n    await this.setState({ btn: false });\n    await addMsg(this.state.user.photoURL, this.state.msgToSend);\n    await this.setState({ msgToSend: \"\" });\n    await this.updateChat();\n  };\n\n  render() {\n    return (\n      <div className=\"App\">\n        {this.state.user === null ? (\n          <Login\n            onUserLogin={(userData) => this.setState({ user: userData })}\n          />\n        ) : (\n          // <div className=\"container\">\n          //   <ul className=\"MsgWrapper\">\n          //     {this.state.messages.length === 0\n          //       ? \"No messages\"\n          //       : this.state.messages.map((msg, index) => (\n          //           <li\n          //             key={index}\n          //             className={\n          //               msg.user === this.state.user ? \"right\" : \"left\"\n          //             }\n          //           >\n          //             {msg.user === this.state.user ? (\n          //               <div className=\"MsgContainer\">\n          //                 <img src={msg.user} alt=\"avatar\"></img>\n          //                 <div className=\"Msg\">{msg.content}</div>\n          //               </div>\n          //             ) : (\n          //               <div className=\"MsgContainer\">\n          //                 <img src={msg.user} alt=\"avatar\"></img>\n          //                 <div className=\"Msg\">{msg.content}</div>\n          //               </div>\n          //             )}\n          //           </li>\n          //         ))}\n          //   </ul>\n          //   <div className=\"inputContainer\">\n          //     <input\n          //       onChange={(e) => this.setState({ msgToSend: e.target.value })}\n          //       value={this.state.msgToSend}\n          //     ></input>\n          //     <button onClick={this.addMsgHandler}>Click</button>\n          //   </div>\n          // </div>\n          <div className=\"chat\">\n            <div className=\"chat-title\">\n              <h1>F3</h1>\n              <h2>{this.state.user.displayName}</h2>\n              <figure className=\"avatar\">\n                <img src={this.state.user.photoURL} alt=\"avatar\" />\n              </figure>\n            </div>\n            <div className=\"messages\">\n              <div className=\"messages-content\">\n                {this.state.messages.map((msg, index) =>\n                  !(msg.user === this.state.user.photoURL) ? (\n                    <div class=\"message\">\n                      <figure class=\"avatar\">\n                        <img src={msg.user} alt=\"avatar\" />\n                      </figure>\n                      {msg.content}\n                    </div>\n                  ) : (\n                    <div class=\"message message-personal\">{msg.content}</div>\n                  )\n                )}\n              </div>\n            </div>\n            <div className=\"message-box\">\n              <textarea\n                type=\"text\"\n                className=\"message-input\"\n                placeholder=\"Type message...\"\n                onChange={(e) => this.handleInputChange(e)}\n                value={this.state.msgToSend}\n              ></textarea>\n              <button\n                type=\"submit\"\n                onClick={this.addMsgHandler}\n                className=\"message-submit\"\n              >\n                Send\n              </button>\n            </div>\n          </div>\n        )}\n        {/* <div className=\"area\">\n          <ul className=\"circles\">\n            <li></li>\n            <li></li>\n            <li></li>\n            <li></li>\n            <li></li>\n            <li></li>\n            <li></li>\n            <li></li>\n            <li></li>\n            <li></li>\n          </ul>\n        </div> */}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}