(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{25:function(e,t,a){},29:function(e,t,a){"use strict";a.r(t);var s=a(2),n=a(7),c=a.n(n),r=a(14),o=a.n(r),i=a(9),l=a.n(i),u=a(11),d=a(15),h=a(16),p=a(18),m=a(17),g=(a(25),a(10));a(26),a(30);g.a.initializeApp({apiKey:"AIzaSyDVG0PtInMTclQla1MzeZnHjJceQgtm8m8",authDomain:"chat-app-34123.firebaseapp.com",databaseURL:"https://chat-app-34123-default-rtdb.firebaseio.com",projectId:"chat-app-34123",storageBucket:"chat-app-34123.appspot.com",messagingSenderId:"569280308056",appId:"1:569280308056:web:a17a1ff413aab459157b2d"});var j=g.a,b=g.a.auth(),f=g.a.firestore(),x=function(){var e=Object(u.a)(l.a.mark((function e(t,a){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.collection("chat").add({user:t,content:a,timestamp:j.firestore.FieldValue.serverTimestamp()}),e.next=3,f.collection("chat").orderBy("timestamp","asc").get();case 3:if(!((s=e.sent).docs.length>=10)){e.next=7;break}return e.next=7,f.collection("chat").doc(s.docs[0].id).delete();case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),v=function(e){return Object(s.jsxs)("div",{style:{textAlign:"center",margin:0,zIndex:"2",width:"100%",position:"absolute",top:"50%",msTransform:"translateY(-50%)",transform:"translateY(-50%)"},children:[Object(s.jsx)("img",{className:"hoverable",onClick:function(){b.signInWithPopup(new j.auth.GoogleAuthProvider).then((function(t){console.log(t.user),e.onUserLogin(t.user)})).catch((function(e){console.log(e.message)}))},src:"https://upload.wikimedia.org/wikipedia/commons/c/c3/Font_Awesome_5_brands_google.svg",alt:"google logo",style:{width:"100px",height:"100px"}}),Object(s.jsx)("h1",{className:"hoverable",style:{fontWeight:900,fontFamily:"revert"},children:"Log In"})]})},O=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(d.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={messages:[],msgToSend:"",btn:!0,user:null},e.updateChat=function(){f.collection("chat").orderBy("timestamp","asc").get().then((function(t){var a=[];t.docs.map((function(e){return a.push(e.data()),0})),e.setState({messages:a}),e.setState({btn:!0})}))},e.handleInputChange=function(t){"Enter"===t.key?e.addMsgHandler():e.setState({msgToSend:t.target.value})},e.addMsgHandler=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({btn:!1});case 2:return t.next=4,x(e.state.user.photoURL,e.state.msgToSend);case 4:return t.next=6,e.setState({msgToSend:""});case 6:return t.next=8,e.updateChat();case 8:case"end":return t.stop()}}),t)}))),e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.updateChat(),f.collection("chat").onSnapshot(this.updateChat)}},{key:"render",value:function(){var e=this;return Object(s.jsx)("div",{className:"App",children:null===this.state.user?Object(s.jsx)(v,{onUserLogin:function(t){return e.setState({user:t})}}):Object(s.jsxs)("div",{className:"chat",children:[Object(s.jsxs)("div",{className:"chat-title",children:[Object(s.jsx)("h1",{children:"F3"}),Object(s.jsx)("h2",{children:this.state.user.displayName}),Object(s.jsx)("figure",{className:"avatar",children:Object(s.jsx)("img",{src:this.state.user.photoURL,alt:"avatar"})})]}),Object(s.jsx)("div",{className:"messages",children:Object(s.jsx)("div",{className:"messages-content",children:this.state.messages.map((function(t,a){return t.user!==e.state.user.photoURL?Object(s.jsxs)("div",{class:"message",children:[Object(s.jsx)("figure",{class:"avatar",children:Object(s.jsx)("img",{src:t.user,alt:"avatar"})}),t.content]}):Object(s.jsx)("div",{class:"message message-personal",children:t.content})}))})}),Object(s.jsxs)("div",{className:"message-box",children:[Object(s.jsx)("textarea",{type:"text",className:"message-input",placeholder:"Type message...",onChange:function(t){return e.handleInputChange(t)},value:this.state.msgToSend}),Object(s.jsx)("button",{type:"submit",onClick:this.addMsgHandler,className:"message-submit",children:"Send"})]})]})})}}]),a}(c.a.Component);o.a.render(Object(s.jsx)(c.a.StrictMode,{children:Object(s.jsx)(O,{})}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.a68d1b02.chunk.js.map